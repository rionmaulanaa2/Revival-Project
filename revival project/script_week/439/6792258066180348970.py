# uncompyle6 version 2.13.2
# Python bytecode 2.7 (62211)
# Decompiled from: Python 2.7.18 (default, Sep 12 2025, 12:48:39) 
# [GCC Android (13624864, +pgo, +bolt, +lto, +mlgo, based on r530567e) Clang 19.0
# Embedded file name: /Users/netease/Documents/work/battlegrounds/gameplay/releases/rel_current/tools/patch/temp/script/logic/gcommon/cdata/dan_data.py
_reload_all = True
BROZE = 1
SILVER = 2
GOLD = 3
PLATINUM = 4
DIAMOND = 5
SUPER = 6
LEGEND = 7
ALPHA = 8
data = {BROZE: {'name': 608001,
           'lv_num': 3,
           'star_num': 3,
           'protect_num': 3,
           'season_reward': {24: 19010101,
                             25: 19010101,
                             22: 19010101,
                             26: 19010101,
                             27: 19010101,
                             20: 19010101,
                             21: 19010101,
                             11: 19010101,
                             10: 19010101,
                             13: 19010101,
                             12: 19010101,
                             15: 19010101,
                             14: 19010101,
                             17: 19010101,
                             16: 19010101,
                             19: 19010101,
                             18: 19010101,
                             23: 19010101,
                             28: 19010101,
                             29: 19010101,
                             1: 19010101,
                             3: 19010101,
                             2: 19010101,
                             5: 19010101,
                             4: 19010101,
                             7: 19010101,
                             6: 19010101,
                             9: 19010101,
                             8: 19010101
                             }
           },
   SILVER: {'name': 608002,
            'lv_num': 3,
            'star_num': 4,
            'protect_num': 3,
            'season_reward': {24: 19010102,
                              25: 19010102,
                              22: 19010102,
                              26: 19010102,
                              27: 19010102,
                              20: 19010102,
                              21: 19010102,
                              11: 19010102,
                              10: 19010102,
                              13: 19010102,
                              12: 19010102,
                              15: 19010102,
                              14: 19010102,
                              17: 19010102,
                              16: 19010102,
                              19: 19010102,
                              18: 19010102,
                              23: 19010102,
                              28: 19010102,
                              29: 19010102,
                              1: 19010102,
                              3: 19010102,
                              2: 19010102,
                              5: 19010102,
                              4: 19010102,
                              7: 19010102,
                              6: 19010102,
                              9: 19010102,
                              8: 19010102
                              }
            },
   GOLD: {'name': 608003,
          'lv_num': 4,
          'star_num': 4,
          'protect_num': 3,
          'head_frame': 30150011,
          'season_reward': {24: 19010103,
                            25: 19010103,
                            22: 19010103,
                            26: 19010103,
                            27: 19010103,
                            20: 19010103,
                            21: 19010103,
                            11: 19010103,
                            10: 19010103,
                            13: 19010103,
                            12: 19010103,
                            15: 19010103,
                            14: 19010103,
                            17: 19010103,
                            16: 19010103,
                            19: 19010103,
                            18: 19010103,
                            23: 19010103,
                            28: 19010103,
                            29: 19010103,
                            1: 19010103,
                            3: 19010103,
                            2: 19010103,
                            5: 19010103,
                            4: 19010103,
                            7: 19010103,
                            6: 19010103,
                            9: 19010103,
                            8: 19010103
                            }
          },
   PLATINUM: {'name': 608004,
              'lv_num': 4,
              'star_num': 5,
              'protect_num': 2,
              'head_frame': 30150021,
              'season_reward': {24: 19010104,
                                25: 19010104,
                                22: 19010104,
                                26: 19010104,
                                27: 19010104,
                                20: 19010104,
                                21: 19010104,
                                11: 19010104,
                                10: 19010104,
                                13: 19010104,
                                12: 19010104,
                                15: 19010104,
                                14: 19010104,
                                17: 19010104,
                                16: 19010104,
                                19: 19010104,
                                18: 19010104,
                                23: 19010104,
                                28: 19010104,
                                29: 19010104,
                                1: 19010104,
                                3: 19010104,
                                2: 19010104,
                                5: 19010104,
                                4: 19010104,
                                7: 19010104,
                                6: 19010104,
                                9: 19010104,
                                8: 19010104
                                }
              },
   DIAMOND: {'name': 608005,
             'lv_num': 5,
             'star_num': 5,
             'protect_num': 2,
             'head_frame': 30150031,
             'season_reward': {24: 19010105,
                               25: 19010105,
                               22: 19010105,
                               26: 19010105,
                               27: 19010105,
                               20: 19010105,
                               21: 19010105,
                               11: 19010105,
                               10: 19010105,
                               13: 19010105,
                               12: 19010105,
                               15: 19010105,
                               14: 19010105,
                               17: 19010105,
                               16: 19010105,
                               19: 19010105,
                               18: 19010105,
                               23: 19010105,
                               28: 19010105,
                               29: 19010105,
                               1: 19010105,
                               3: 19010105,
                               2: 19010105,
                               5: 19010105,
                               4: 19010105,
                               7: 19010105,
                               6: 19010105,
                               9: 19010105,
                               8: 19010105
                               }
             },
   SUPER: {'name': 608006,
           'lv_num': 5,
           'star_num': 5,
           'protect_num': 1,
           'head_frame': 30150051,
           'season_reward': {24: 19010106,
                             25: 19010106,
                             22: 19010106,
                             26: 19010106,
                             27: 19010106,
                             20: 19010106,
                             21: 19010106,
                             11: 19010106,
                             10: 19010106,
                             13: 19010106,
                             12: 19010106,
                             15: 19010106,
                             14: 19010106,
                             17: 19010106,
                             16: 19010106,
                             19: 19010106,
                             18: 19010106,
                             23: 19010106,
                             28: 19010106,
                             29: 19010106,
                             1: 19010106,
                             3: 19010106,
                             2: 19010106,
                             5: 19010106,
                             4: 19010106,
                             7: 19010106,
                             6: 19010106,
                             9: 19010106,
                             8: 19010106
                             }
           },
   LEGEND: {'name': 608007,
            'lv_num': 1,
            'star_num': None,
            'protect_num': 0,
            'head_frame': 30150081,
            'na_head_frame': 30150081,
            'season_reward': {24: 19010107,
                              25: 19010107,
                              22: 19010107,
                              26: 19010107,
                              27: 19010107,
                              20: 19010107,
                              21: 19010107,
                              11: 19010107,
                              10: 19010107,
                              13: 19010107,
                              12: 19010107,
                              15: 19010107,
                              14: 19010107,
                              17: 19010107,
                              16: 19010107,
                              19: 19010107,
                              18: 19010107,
                              23: 19010107,
                              28: 19010107,
                              29: 19010107,
                              1: 19010107,
                              3: 19010107,
                              2: 19010107,
                              5: 19010107,
                              4: 19010107,
                              7: 19010107,
                              6: 19010107,
                              9: 19010107,
                              8: 19010107
                              }
            },
   ALPHA: {'name': 608008,
           'lv_num': 1,
           'star_num': None,
           'protect_num': 0,
           'head_frame': 30150211,
           'na_head_frame': 30150211,
           'season_reward': {24: 19010107,
                             25: 19010107,
                             22: 19010107,
                             26: 19010107,
                             27: 19010107,
                             20: 19010107,
                             21: 19010107,
                             11: 19010107,
                             10: 19010107,
                             13: 19010107,
                             12: 19010107,
                             15: 19010107,
                             14: 19010107,
                             17: 19010107,
                             16: 19010107,
                             19: 19010107,
                             18: 19010107,
                             23: 19010107,
                             28: 19010107,
                             29: 19010107,
                             1: 19010107,
                             3: 19010107,
                             2: 19010107,
                             5: 19010107,
                             4: 19010107,
                             7: 19010107,
                             6: 19010107,
                             9: 19010107,
                             8: 19010107
                             }
           }
   }
from six.moves import range
DAN_SURVIVAL = 'survival_dan'
DAN_DEATH = 'death_dan'
SETTLE_DAN_TYPE = [
 DAN_SURVIVAL, DAN_DEATH]
DAN_TO_BATTLE_TYPE = {DAN_SURVIVAL: [
                4, 5, 6],
   DAN_DEATH: []}
LEAGUE_POINT_PER_STAR = 100
MAX_LEAGUE_POINT_ADD = 700
BASIC_SEASON_POINT = 1000
MAX_DAN = ALPHA
head_frames = []

def generate_head_frames_list():
    global head_frames
    if head_frames:
        return
    for dan in range(BROZE, LEGEND + 2):
        head_frame = data[dan].get('head_frame')
        head_frames.append(head_frame)


generate_head_frames_list()

def get_lv_num(dan):
    return data.get(dan, {}).get('lv_num', 0)


def get_star_num(dan):
    return data.get(dan, {}).get('star_num', 0)


def get_dan_protect_num(dan):
    return data.get(dan, {}).get('protect_num', 0)


def get_dan_name_id(dan):
    return data.get(dan, {}).get('name', '')


def calc_star(dan_info):
    dan = dan_info.get('dan', BROZE)
    cur_lv_num = get_lv_num(dan)
    lv = dan_info.get('lv', cur_lv_num)
    star = dan_info.get('star', 0)
    total_star_num = 0
    cur_star_num = get_star_num(dan)
    cur_star_num = cur_star_num or 0 if 1 else cur_star_num
    for d in range(1, min(LEGEND, dan)):
        lv_num = get_lv_num(d)
        star_num = get_star_num(d)
        total_star_num += lv_num * (star_num + 1)

    total_star_num += (cur_lv_num - lv) * (cur_star_num + 1)
    total_star_num += star
    return total_star_num


def cmp_dan(dan_info1, dan_info2):
    dan1 = dan_info1.get('dan', BROZE)
    lv1 = dan_info1.get('lv', get_lv_num(dan1))
    star1 = dan_info1.get('star', 0)
    dan2 = dan_info2.get('dan', BROZE)
    lv2 = dan_info2.get('lv', get_lv_num(dan2))
    star2 = dan_info2.get('star', 0)
    if dan1 > dan2:
        return True
    if dan1 < dan2:
        return False
    if lv1 < lv2:
        return True
    if lv1 > lv2:
        return False
    if star1 > star2:
        return True
    return False


def cmp_dan2(dan_info1, dan_info2):
    dan1 = dan_info1.get('dan', BROZE)
    lv1 = dan_info1.get('lv', get_lv_num(dan1))
    star1 = dan_info1.get('star', 0)
    dan2 = dan_info2.get('dan', BROZE)
    lv2 = dan_info2.get('lv', get_lv_num(dan2))
    star2 = dan_info2.get('star', 0)
    DAN_BIT = 1
    DAN_LV_BIT = 1
    STAR_BIT = 5
    LV_OFFSET = 10 ** STAR_BIT
    DAN_OFFSET = 10 ** (STAR_BIT + DAN_LV_BIT)
    cmp_key1 = dan1 * DAN_OFFSET + (10 - lv1) * LV_OFFSET + star1
    cmp_key2 = dan2 * DAN_OFFSET + (10 - lv2) * LV_OFFSET + star2
    if cmp_key1 > cmp_key2:
        return True
    else:
        return False


def get_season_reward(season, dan):
    return data.get(dan, {}).get('season_reward', {}).get(season, None)


def get_dan_head_frames(dan):
    if not head_frames:
        generate_head_frames_list()
    return head_frames[:dan]


if __name__ == '__main__':
    import random
    for i in range(100):
        rand_dan = random.randint(1, 8)
        lv_num = get_lv_num(rand_dan)
        lv = random.randint(1, lv_num)
        star_num = get_star_num(rand_dan)
        star_num = star_num or 100 if 1 else star_num
        star = random.randint(0, star_num)
        dan1 = {'dan': rand_dan,'lv': lv,'star': star}
        rand_dan = random.randint(1, 8)
        lv_num = get_lv_num(rand_dan)
        lv = random.randint(1, lv_num)
        star_num = get_star_num(rand_dan)
        star_num = star_num or 100 if 1 else star_num
        star = random.randint(0, star_num)
        dan2 = {'dan': rand_dan,'lv': lv,'star': star}
        if cmp_dan(dan1, dan2) != cmp_dan2(dan1, dan2):
            print (
             'error: ', dan1, dan2)

    c = 0
    c7 = 0
    for dan in range(9):
        if dan == 7:
            c7 = c
        if dan == 8:
            c = c7
        for lv in range(get_lv_num(dan), 0, -1):
            star_num = get_star_num(dan)
            if not star_num:
                star_num = 100 if 1 else star_num
                for star in range(star_num + 1):
                    dan_info = {'dan': dan,'lv': lv,'star': star}
                    if c != calc_star(dan_info):
                        print (
                         'error: ', dan_info, c, calc_star(dan_info))
                    c += 1