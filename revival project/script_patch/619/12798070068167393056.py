# uncompyle6 version 2.13.2
# Python bytecode 2.7 (62211)
# Decompiled from: Python 2.7.18 (default, Sep 12 2025, 12:48:39) 
# [GCC Android (13624864, +pgo, +bolt, +lto, +mlgo, based on r530567e) Clang 19.0
# Embedded file name: /Users/netease/Documents/work/battlegrounds/gameplay/releases/rel_current/tools/patch/temp/script/logic/gcommon/cdata/global_lottery_config.py
_reload_all = True
data = {'anniversary4_cn_1': {'open_servers': [
                                        0, 10000],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302823, 4), (12302822, 12)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 10,
                         'limit_dan': 3,
                         'group_id': 'anniversary4_cn',
                         'title': 11555,
                         'content': 11556,
                         'start_time': 1705666068,
                         'settle_time': 1705666668
                         },
   'anniversary4_cn_2': {'open_servers': [
                                        0, 10000],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302824, 6), (12302825, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 5,
                         'group_id': 'anniversary4_cn',
                         'title': 11555,
                         'content': 11556,
                         'start_time': 1705666925,
                         'settle_time': 1705667525
                         },
   'anniversary4_cn_3': {'open_servers': [
                                        0, 10000],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302826, 2), (12302827, 40)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 4,
                         'group_id': 'anniversary4_cn',
                         'title': 11555,
                         'content': 11556,
                         'start_time': 1705668538,
                         'settle_time': 1705669128
                         },
   'anniversary4_mumu_1': {'open_servers': [
                                          15000, 0],
                           'check_handler': 'check_anniversary_lottery',
                           'lottery_reward': [
                                            (12302823, 1), (12302822, 4)],
                           'attend_rewrad': 12301920,
                           'limit_lv': 10,
                           'limit_dan': 3,
                           'group_id': 'anniversary4_mumu',
                           'title': 11555,
                           'content': 11557,
                           'start_time': 1705666068,
                           'settle_time': 1705666668
                           },
   'anniversary4_mumu_2': {'open_servers': [
                                          15000, 0],
                           'check_handler': 'check_anniversary_lottery',
                           'lottery_reward': [
                                            (12302824, 2), (12302829, 20)],
                           'attend_rewrad': 12301920,
                           'limit_lv': 30,
                           'limit_dan': 5,
                           'group_id': 'anniversary4_mumu',
                           'title': 11555,
                           'content': 11557,
                           'start_time': 1705666925,
                           'settle_time': 1705667525
                           },
   'anniversary4_mumu_3': {'open_servers': [
                                          15000, 0],
                           'check_handler': 'check_anniversary_lottery',
                           'lottery_reward': [
                                            (12302826, 1), (12302827, 20)],
                           'attend_rewrad': 12301920,
                           'limit_lv': 30,
                           'limit_dan': 4,
                           'group_id': 'anniversary4_mumu',
                           'title': 11555,
                           'content': 11557,
                           'start_time': 1705668538,
                           'settle_time': 1705669128
                           },
   'anniversary4_as_1': {'open_servers': [
                                        20000, 24000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302823, 2), (12302822, 6)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 10,
                         'limit_dan': 3,
                         'group_id': 'anniversary4_as',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705669668,
                         'settle_time': 1705670268
                         },
   'anniversary4_as_2': {'open_servers': [
                                        20000, 24000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302824, 3), (12302829, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 5,
                         'group_id': 'anniversary4_as',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705670525,
                         'settle_time': 1705671125
                         },
   'anniversary4_as_3': {'open_servers': [
                                        20000, 24000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302826, 1), (12302827, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 4,
                         'group_id': 'anniversary4_as',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705672138,
                         'settle_time': 1705672728
                         },
   'anniversary4_jp_1': {'open_servers': [
                                        21000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302823, 2), (12302822, 6)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 10,
                         'limit_dan': 3,
                         'group_id': 'anniversary4_jp',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705662468,
                         'settle_time': 1705663068
                         },
   'anniversary4_jp_2': {'open_servers': [
                                        21000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302824, 3), (12302829, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 5,
                         'group_id': 'anniversary4_jp',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705663325,
                         'settle_time': 1705663925
                         },
   'anniversary4_jp_3': {'open_servers': [
                                        21000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302826, 1), (12302827, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 4,
                         'group_id': 'anniversary4_jp',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705664938,
                         'settle_time': 1705665528
                         },
   'anniversary4_eu_1': {'open_servers': [
                                        30000, 32000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302823, 2), (12302822, 6)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 10,
                         'limit_dan': 3,
                         'group_id': 'anniversary4_eu',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705644468,
                         'settle_time': 1705645068
                         },
   'anniversary4_eu_2': {'open_servers': [
                                        30000, 32000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302824, 3), (12302829, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 5,
                         'group_id': 'anniversary4_eu',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705645325,
                         'settle_time': 1705645925
                         },
   'anniversary4_eu_3': {'open_servers': [
                                        30000, 32000, 0],
                         'check_handler': 'check_anniversary_lottery',
                         'lottery_reward': [
                                          (12302826, 1), (12302827, 20)],
                         'attend_rewrad': 12301920,
                         'limit_lv': 30,
                         'limit_dan': 4,
                         'group_id': 'anniversary4_eu',
                         'title': 11555,
                         'content': 11557,
                         'start_time': 1705646938,
                         'settle_time': 1705647528
                         }
   }
import six
from logic.gcommon import time_utility as tutil

def get_global_lottery_conf(lid):
    return data.get(lid, {})


group_id2_lotterys = {}

def init_group_dict():
    for lid, conf in six.iteritems(data):
        gid = conf['group_id']
        group_id2_lotterys.setdefault(gid, [])
        group_id2_lotterys[gid].append(lid)


init_group_dict()

def get_lotterys_by_gid(gid):
    return group_id2_lotterys.get(gid, [])


if G_IS_SERVER:
    from mobile.distserver.game import GameServerRepo
    opened_lottery_ids = []

    def init_opened_lottery():
        now = tutil.time()
        for l_key, conf in six.iteritems(data):
            open_servers = conf['open_servers']
            hostnum = GameServerRepo.hostnum
            if hostnum not in open_servers:
                if 0 not in open_servers or not GameServerRepo.is_inner_server():
                    continue
            opened_lottery_ids.append(l_key)

        opened_lottery_ids.sort(key=lambda x: data.get(x, {}).get('settle_time'))


    init_opened_lottery()

    def get_nearliest_global_lottery_id():
        for lid in opened_lottery_ids:
            now = tutil.time()
            conf = data[lid]
            settle_time = conf['settle_time']
            if now < settle_time:
                return lid

        return None